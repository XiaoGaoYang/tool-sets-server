# tool-sets-server

`tool-sets`项目的服务器端代码，提供API供客户端调用

采用`MongoDB`作为数据库

# 图书馆书籍查询

首先获取用户输入关键字，在本地数据库查找，将查找结果返回给客户端，再根据关键字去爬取数据，并与数据库中的数据比较，将数据库中已经有的剔除，然后保存到数据库。

所以，如果查某本书时发现没有相关搜索结果，而图书馆又确实有这本书，此时等几分钟，让爬虫把数据爬回数据库，再进行查找就能查到了。

矿大图书馆书籍查询系统，采用的是后端渲染，不能直接使用API获取数据，所以采取的方法是先获取网页内容，从网页中将需要的数据爬取出来，然后再根据每本书的ISBN，从豆瓣API获取图书的封面，价格，简介等信息。

## API

请求：`POST` `http://localhost:3000/tool-sets/book/library`  

接受参数：

| 参数 | 意义 | 备注 |
| ------ | ------ | ------ |
| keyword | 搜索关键字 | 必填，为用户输入的书名 |  

返回示例：
```javascript
{
  "totalPage": "30",
  "currentPage": "1",
  "bookList": [{
    "name": "CSS商业网站布局之道",
    "number": "TP393.092/Z-919.2",
    "isbn": "9787302158103",
    "detail": "0000430094",
    "place": "南湖密集书库Ⅰ, 南湖密集书库Ⅰ, 南湖密集书库Ⅰ, 南湖密集书库Ⅰ, 文昌科技书阅览室",
    "author": "朱印宏著",
    "publiser": "清华大学出版社 2007",
    "price": "75元",
    "cover": "https://img3.doubanio.com/mpic/s3022312.jpg" // 当没有查到封面的时候没有该属性
  }]
}
```
